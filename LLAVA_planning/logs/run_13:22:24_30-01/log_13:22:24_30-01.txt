[2026-01-30 13:22:24] Run directory created at logs/run_13:22:24_30-01
[2026-01-30 13:22:24] Environment initialized with agent at (4.5, 5.5) and goal at (5.5, 12.5)
[2026-01-30 13:22:24] Starting navigation from [4.5, 5.5] to goal at [5.5, 12.5]
[2026-01-30 13:22:24] Scan step begin at [4.5, 5.5]
[2026-01-30 13:22:24] Starting LIDAR scan at position [4.5, 5.5]
[2026-01-30 13:22:24] LIDAR scan completed.
[2026-01-30 13:22:24] LIDAR red hits (obstacles): []
[2026-01-30 13:22:24] Scan step end: obstacle_detected=False
[2026-01-30 13:22:25] Scan step begin at [4.6, 5.6]
[2026-01-30 13:22:25] Starting LIDAR scan at position [4.6, 5.6]
[2026-01-30 13:22:25] LIDAR scan completed.
[2026-01-30 13:22:25] LIDAR red hits (obstacles): []
[2026-01-30 13:22:25] Scan step end: obstacle_detected=False
[2026-01-30 13:22:25] Scan step begin at [4.6899999999999995, 5.699999999999999]
[2026-01-30 13:22:25] Starting LIDAR scan at position [4.6899999999999995, 5.699999999999999]
[2026-01-30 13:22:25] LIDAR scan completed.
[2026-01-30 13:22:25] LIDAR red hits (obstacles): []
[2026-01-30 13:22:25] Scan step end: obstacle_detected=False
[2026-01-30 13:22:25] Scan step begin at [4.771, 5.799999999999999]
[2026-01-30 13:22:25] Starting LIDAR scan at position [4.771, 5.799999999999999]
[2026-01-30 13:22:25] LIDAR scan completed.
[2026-01-30 13:22:25] LIDAR red hits (obstacles): []
[2026-01-30 13:22:25] Scan step end: obstacle_detected=False
[2026-01-30 13:22:25] Scan step begin at [4.8439, 5.899999999999999]
[2026-01-30 13:22:25] Starting LIDAR scan at position [4.8439, 5.899999999999999]
[2026-01-30 13:22:25] LIDAR scan completed.
[2026-01-30 13:22:25] LIDAR red hits (obstacles): []
[2026-01-30 13:22:25] Scan step end: obstacle_detected=False
[2026-01-30 13:22:25] Scan step begin at [4.90951, 5.999999999999998]
[2026-01-30 13:22:25] Starting LIDAR scan at position [4.90951, 5.999999999999998]
[2026-01-30 13:22:26] LIDAR scan completed.
[2026-01-30 13:22:26] LIDAR red hits (obstacles): []
[2026-01-30 13:22:26] Scan step end: obstacle_detected=False
[2026-01-30 13:22:26] Scan step begin at [4.968559, 6.099999999999998]
[2026-01-30 13:22:26] Starting LIDAR scan at position [4.968559, 6.099999999999998]
[2026-01-30 13:22:26] LIDAR scan completed.
[2026-01-30 13:22:26] LIDAR red hits (obstacles): []
[2026-01-30 13:22:26] Scan step end: obstacle_detected=False
[2026-01-30 13:22:26] Scan step begin at [5.0217031, 6.1999999999999975]
[2026-01-30 13:22:26] Starting LIDAR scan at position [5.0217031, 6.1999999999999975]
[2026-01-30 13:22:26] LIDAR scan completed.
[2026-01-30 13:22:26] LIDAR red hits (obstacles): []
[2026-01-30 13:22:26] Scan step end: obstacle_detected=False
[2026-01-30 13:22:26] Scan step begin at [5.06953279, 6.299999999999997]
[2026-01-30 13:22:26] Starting LIDAR scan at position [5.06953279, 6.299999999999997]
[2026-01-30 13:22:26] LIDAR scan completed.
[2026-01-30 13:22:26] LIDAR red hits (obstacles): []
[2026-01-30 13:22:26] Scan step end: obstacle_detected=False
[2026-01-30 13:22:26] Scan step begin at [5.112579511, 6.399999999999997]
[2026-01-30 13:22:26] Starting LIDAR scan at position [5.112579511, 6.399999999999997]
[2026-01-30 13:22:26] LIDAR scan completed.
[2026-01-30 13:22:26] LIDAR red hits (obstacles): []
[2026-01-30 13:22:26] Scan step end: obstacle_detected=False
[2026-01-30 13:22:26] Scan step begin at [5.1513215598999995, 6.4999999999999964]
[2026-01-30 13:22:26] Starting LIDAR scan at position [5.1513215598999995, 6.4999999999999964]
[2026-01-30 13:22:26] Ray hit at [5.234195240832978, 6.97]
[2026-01-30 13:22:26] Ray at angle 80.0° hit obstacle at [5.234195240832978, 6.97]
[2026-01-30 13:22:26] Ray hit at [5.1513215598999995, 6.97]
[2026-01-30 13:22:26] Ray at angle 90.0° hit obstacle at [5.1513215598999995, 6.97]
[2026-01-30 13:22:26] Ray hit at [5.068447878967021, 6.97]
[2026-01-30 13:22:26] Ray at angle 100.0° hit obstacle at [5.068447878967021, 6.97]
[2026-01-30 13:22:27] LIDAR scan completed.
[2026-01-30 13:22:27] LIDAR red hits (obstacles): [[5.234, 6.97], [5.151, 6.97], [5.068, 6.97]]
[2026-01-30 13:22:27] Scan step end: obstacle_detected=True
[2026-01-30 13:22:27] Obstacle detected near [5.15, 6.97] (from LIDAR hits) — querying for batch detour waypoints
[2026-01-30 13:22:27] ===== DETOUR TRIGGERED =====
[2026-01-30 13:22:27] Agent position: [5.1513215598999995, 6.4999999999999964]
[2026-01-30 13:22:27] Goal position: [5.5, 12.5]
[2026-01-30 13:22:27] Starting LIDAR scan at position [5.1513215598999995, 6.4999999999999964]
[2026-01-30 13:22:27] Ray hit at [5.234195240832978, 6.97]
[2026-01-30 13:22:27] Ray at angle 80.0° hit obstacle at [5.234195240832978, 6.97]
[2026-01-30 13:22:27] Ray hit at [5.1513215598999995, 6.97]
[2026-01-30 13:22:27] Ray at angle 90.0° hit obstacle at [5.1513215598999995, 6.97]
[2026-01-30 13:22:27] Ray hit at [5.068447878967021, 6.97]
[2026-01-30 13:22:27] Ray at angle 100.0° hit obstacle at [5.068447878967021, 6.97]
[2026-01-30 13:22:27] LIDAR scan completed.
[2026-01-30 13:22:27] LIDAR red hits (obstacles): [[5.234, 6.97], [5.151, 6.97], [5.068, 6.97]]
[2026-01-30 13:22:27] LIDAR hit count: 3
[2026-01-30 13:22:27] LIDAR hit points: [[5.234, 6.97], [5.151, 6.97], [5.068, 6.97]]
[2026-01-30 13:22:27] VLM snapshot saved at: logs/run_13:22:24_30-01/vlm_snapshot_13:22:24_30-01.png
[2026-01-30 13:22:27] Querying VLM model: gpt-4o
[2026-01-30 13:22:27] Calling VLM for detour (attempt 1)
[2026-01-30 13:22:31] VLM returned 5 waypoints: [[5.0, 6.5], [5.0, 7.5], [5.5, 8.5], [5.5, 9.5], [5.5, 10.5]]
[2026-01-30 13:22:31] Accept WP1: [5.0, 6.5]
[2026-01-30 13:22:31] Accept WP2: [5.0, 7.5]
[2026-01-30 13:22:31] Reject WP3: segment [5.0, 7.5] -> [5.5, 8.5] intersects original obstacle interior
[2026-01-30 13:22:31] Reject WP4: inside original obstacle [5.5, 9.5]
[2026-01-30 13:22:31] Reject WP5: inside original obstacle [5.5, 10.5]
[2026-01-30 13:22:31] Detour validation result: SUCCESS (2 waypoints accepted)
[2026-01-30 13:22:31] ===== DETOUR END =====
[2026-01-30 13:22:31] Moving to waypoint [5.0, 6.5]
[2026-01-30 13:22:31] Scan step begin at [5.13618940391, 6.4999999999999964]
[2026-01-30 13:22:31] Starting LIDAR scan at position [5.13618940391, 6.4999999999999964]
[2026-01-30 13:22:31] Ray hit at [5.219063084842978, 6.97]
[2026-01-30 13:22:31] Ray at angle 80.0° hit obstacle at [5.219063084842978, 6.97]
[2026-01-30 13:22:31] Ray hit at [5.13618940391, 6.97]
[2026-01-30 13:22:31] Ray at angle 90.0° hit obstacle at [5.13618940391, 6.97]
[2026-01-30 13:22:31] Ray hit at [5.053315722977021, 6.97]
[2026-01-30 13:22:31] Ray at angle 100.0° hit obstacle at [5.053315722977021, 6.97]
[2026-01-30 13:22:31] LIDAR scan completed.
[2026-01-30 13:22:31] LIDAR red hits (obstacles): [[5.219, 6.97], [5.136, 6.97], [5.053, 6.97]]
[2026-01-30 13:22:31] Scan step end: obstacle_detected=True
[2026-01-30 13:22:31] Scan step begin at [5.122570463519, 6.4999999999999964]
[2026-01-30 13:22:31] Starting LIDAR scan at position [5.122570463519, 6.4999999999999964]
[2026-01-30 13:22:31] Ray hit at [5.205444144451978, 6.97]
[2026-01-30 13:22:31] Ray at angle 80.0° hit obstacle at [5.205444144451978, 6.97]
[2026-01-30 13:22:31] Ray hit at [5.122570463519, 6.97]
[2026-01-30 13:22:31] Ray at angle 90.0° hit obstacle at [5.122570463519, 6.97]
[2026-01-30 13:22:31] Ray hit at [5.039696782586021, 6.97]
[2026-01-30 13:22:31] Ray at angle 100.0° hit obstacle at [5.039696782586021, 6.97]
[2026-01-30 13:22:31] LIDAR scan completed.
[2026-01-30 13:22:31] LIDAR red hits (obstacles): [[5.205, 6.97], [5.123, 6.97], [5.04, 6.97]]
[2026-01-30 13:22:31] Scan step end: obstacle_detected=True
[2026-01-30 13:22:31] Scan step begin at [5.1103134171671, 6.4999999999999964]
[2026-01-30 13:22:31] Starting LIDAR scan at position [5.1103134171671, 6.4999999999999964]
[2026-01-30 13:22:31] Ray hit at [5.193187098100078, 6.97]
[2026-01-30 13:22:31] Ray at angle 80.0° hit obstacle at [5.193187098100078, 6.97]
[2026-01-30 13:22:31] Ray hit at [5.1103134171671, 6.97]
[2026-01-30 13:22:31] Ray at angle 90.0° hit obstacle at [5.1103134171671, 6.97]
[2026-01-30 13:22:31] Ray hit at [5.027439736234121, 6.97]
[2026-01-30 13:22:31] Ray at angle 100.0° hit obstacle at [5.027439736234121, 6.97]
[2026-01-30 13:22:31] LIDAR scan completed.
[2026-01-30 13:22:31] LIDAR red hits (obstacles): [[5.193, 6.97], [5.11, 6.97], [5.027, 6.97]]
[2026-01-30 13:22:31] Scan step end: obstacle_detected=True
[2026-01-30 13:22:31] Scan step begin at [5.09928207545039, 6.4999999999999964]
[2026-01-30 13:22:31] Starting LIDAR scan at position [5.09928207545039, 6.4999999999999964]
[2026-01-30 13:22:31] Ray hit at [5.182155756383368, 6.97]
[2026-01-30 13:22:31] Ray at angle 80.0° hit obstacle at [5.182155756383368, 6.97]
[2026-01-30 13:22:31] Ray hit at [5.09928207545039, 6.97]
[2026-01-30 13:22:31] Ray at angle 90.0° hit obstacle at [5.09928207545039, 6.97]
[2026-01-30 13:22:31] Ray hit at [5.016408394517411, 6.97]
[2026-01-30 13:22:31] Ray at angle 100.0° hit obstacle at [5.016408394517411, 6.97]
[2026-01-30 13:22:31] LIDAR scan completed.
[2026-01-30 13:22:31] LIDAR red hits (obstacles): [[5.182, 6.97], [5.099, 6.97], [5.016, 6.97]]
[2026-01-30 13:22:31] Scan step end: obstacle_detected=True
[2026-01-30 13:22:32] Reached waypoint [5.0, 6.5]
[2026-01-30 13:22:32] Moving to waypoint [5.0, 7.5]
[2026-01-30 13:22:32] Abort moving to [5.0, 7.5] — segment crosses original obstacle
[2026-01-30 13:22:32] Scan step begin at [5.09928207545039, 6.4999999999999964]
[2026-01-30 13:22:32] Starting LIDAR scan at position [5.09928207545039, 6.4999999999999964]
[2026-01-30 13:22:32] Ray hit at [5.182155756383368, 6.97]
[2026-01-30 13:22:32] Ray at angle 80.0° hit obstacle at [5.182155756383368, 6.97]
[2026-01-30 13:22:32] Ray hit at [5.09928207545039, 6.97]
[2026-01-30 13:22:32] Ray at angle 90.0° hit obstacle at [5.09928207545039, 6.97]
[2026-01-30 13:22:32] Ray hit at [5.016408394517411, 6.97]
[2026-01-30 13:22:32] Ray at angle 100.0° hit obstacle at [5.016408394517411, 6.97]
[2026-01-30 13:22:32] LIDAR scan completed.
[2026-01-30 13:22:32] LIDAR red hits (obstacles): [[5.182, 6.97], [5.099, 6.97], [5.016, 6.97]]
[2026-01-30 13:22:32] Scan step end: obstacle_detected=True
[2026-01-30 13:22:32] Obstacle detected near [5.1, 6.97] (from LIDAR hits) — querying for batch detour waypoints
[2026-01-30 13:22:32] ===== DETOUR TRIGGERED =====
[2026-01-30 13:22:32] Agent position: [5.09928207545039, 6.4999999999999964]
[2026-01-30 13:22:32] Goal position: [5.5, 12.5]
[2026-01-30 13:22:32] Starting LIDAR scan at position [5.09928207545039, 6.4999999999999964]
[2026-01-30 13:22:32] Ray hit at [5.182155756383368, 6.97]
[2026-01-30 13:22:32] Ray at angle 80.0° hit obstacle at [5.182155756383368, 6.97]
[2026-01-30 13:22:32] Ray hit at [5.09928207545039, 6.97]
[2026-01-30 13:22:32] Ray at angle 90.0° hit obstacle at [5.09928207545039, 6.97]
[2026-01-30 13:22:32] Ray hit at [5.016408394517411, 6.97]
[2026-01-30 13:22:32] Ray at angle 100.0° hit obstacle at [5.016408394517411, 6.97]
[2026-01-30 13:22:32] LIDAR scan completed.
[2026-01-30 13:22:32] LIDAR red hits (obstacles): [[5.182, 6.97], [5.099, 6.97], [5.016, 6.97]]
[2026-01-30 13:22:32] LIDAR hit count: 3
[2026-01-30 13:22:32] LIDAR hit points: [[5.182, 6.97], [5.099, 6.97], [5.016, 6.97]]
[2026-01-30 13:22:32] VLM snapshot saved at: logs/run_13:22:24_30-01/vlm_snapshot_13:22:24_30-01.png
[2026-01-30 13:22:32] Querying VLM model: gpt-4o
[2026-01-30 13:22:32] Calling VLM for detour (attempt 1)
[2026-01-30 13:22:36] VLM returned 5 waypoints: [[5.0, 7.5], [5.0, 8.5], [5.5, 9.5], [5.5, 10.5], [5.5, 11.5]]
[2026-01-30 13:22:36] Reject WP1: segment [5.09928207545039, 6.4999999999999964] -> [5.0, 7.5] intersects original obstacle interior
[2026-01-30 13:22:36] Reject WP2: segment [5.09928207545039, 6.4999999999999964] -> [5.0, 8.5] intersects original obstacle interior
[2026-01-30 13:22:36] Reject WP3: inside original obstacle [5.5, 9.5]
[2026-01-30 13:22:36] Reject WP4: inside original obstacle [5.5, 10.5]
[2026-01-30 13:22:36] Reject WP5: segment [5.09928207545039, 6.4999999999999964] -> [5.5, 11.5] intersects original obstacle interior
[2026-01-30 13:22:36] Detour validation result: FAILED — waypoints intersect obstacles or are unreachable
[2026-01-30 13:22:36] Retrying VLM detour (attempt 2/3) due to invalid or unreachable waypoints
[2026-01-30 13:22:36] Calling VLM for detour (attempt 2)
[2026-01-30 13:22:39] VLM returned 5 waypoints: [[5.0, 7.5], [5.0, 8.5], [5.5, 9.5], [5.5, 10.5], [5.5, 11.5]]
[2026-01-30 13:22:39] Reject WP1: segment [5.09928207545039, 6.4999999999999964] -> [5.0, 7.5] intersects original obstacle interior
[2026-01-30 13:22:39] Reject WP2: segment [5.09928207545039, 6.4999999999999964] -> [5.0, 8.5] intersects original obstacle interior
[2026-01-30 13:22:39] Reject WP3: inside original obstacle [5.5, 9.5]
[2026-01-30 13:22:39] Reject WP4: inside original obstacle [5.5, 10.5]
[2026-01-30 13:22:39] Reject WP5: segment [5.09928207545039, 6.4999999999999964] -> [5.5, 11.5] intersects original obstacle interior
[2026-01-30 13:22:39] Detour validation result: FAILED — waypoints intersect obstacles or are unreachable
[2026-01-30 13:22:39] Retrying VLM detour (attempt 3/3) due to invalid or unreachable waypoints
[2026-01-30 13:22:39] Calling VLM for detour (attempt 3)
[2026-01-30 13:22:42] VLM returned 5 waypoints: [[5.0, 7.5], [5.0, 8.5], [5.5, 9.5], [5.5, 10.5], [5.5, 11.5]]
[2026-01-30 13:22:42] Reject WP1: segment [5.09928207545039, 6.4999999999999964] -> [5.0, 7.5] intersects original obstacle interior
[2026-01-30 13:22:42] Reject WP2: segment [5.09928207545039, 6.4999999999999964] -> [5.0, 8.5] intersects original obstacle interior
[2026-01-30 13:22:42] Reject WP3: inside original obstacle [5.5, 9.5]
[2026-01-30 13:22:42] Reject WP4: inside original obstacle [5.5, 10.5]
[2026-01-30 13:22:42] Reject WP5: segment [5.09928207545039, 6.4999999999999964] -> [5.5, 11.5] intersects original obstacle interior
[2026-01-30 13:22:42] Detour validation result: FAILED — waypoints intersect obstacles or are unreachable
[2026-01-30 13:22:42] VLM detour FAILED after maximum retries. Stopping navigation safely.
[2026-01-30 13:22:42] ===== DETOUR END =====
[2026-01-30 13:22:42]   produced no usable waypoints after retries — stopping.
[2026-01-30 13:22:42] Stopped (guard or no   waypoints).
[2026-01-30 13:22:43] Final obstacle clusters (with LIDAR hit points):
[2026-01-30 13:22:43] {"id": 0, "n_points": 18, "centroid": [5.1198272705078125, 6.970000743865967], "bbox": [5.016408443450928, 6.96999979019165, 5.234195232391357, 6.96999979019165], "points": [[5.234195232391357, 6.96999979019165], [5.1513214111328125, 6.96999979019165], [5.068448066711426, 6.96999979019165], [5.2190632820129395, 6.96999979019165], [5.1361894607543945, 6.96999979019165], [5.05331563949585, 6.96999979019165], [5.2054443359375, 6.96999979019165], [5.122570514678955, 6.96999979019165], [5.03969669342041, 6.96999979019165], [5.193187236785889, 6.96999979019165], [5.110313415527344, 6.96999979019165], [5.027439594268799, 6.96999979019165], [5.182155609130859, 6.96999979019165], [5.099282264709473, 6.96999979019165], [5.016408443450928, 6.96999979019165], [5.182155609130859, 6.96999979019165], [5.099282264709473, 6.96999979019165], [5.016408443450928, 6.96999979019165]]}
[2026-01-30 13:22:43] Saved heatmap video to logs/run_13:22:24_30-01/heatmap_13:22:24_30-01.mp4
